<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vuelos - Encuentra tu vuelo perfecto | Air ipet 57</title>
    <link rel="stylesheet" href="css/vuelos.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header__content">
                <div class="header__left">
                    <div class="logo">
                        <div class="logo-container">
                            <svg class="planet-logo" viewBox="0 0 100 100" width="40" height="40">
                                <!-- Planeta -->
                                <circle cx="50" cy="50" r="25" fill="#4285f4" stroke="#1976d2" stroke-width="2"/>
                                <circle cx="45" cy="45" r="3" fill="#81c784" opacity="0.8"/>
                                <circle cx="55" cy="40" r="2" fill="#81c784" opacity="0.8"/>
                                <circle cx="52" cy="55" r="2.5" fill="#81c784" opacity="0.8"/>
                                <circle cx="42" cy="58" r="1.5" fill="#81c784" opacity="0.8"/>
                                <path d="M 35 45 Q 50 35 65 45 Q 50 55 35 45" fill="none" stroke="#81c784" stroke-width="1.5" opacity="0.6"/>
                                
                                <!-- Avión -->
                                <g transform="translate(70,30) rotate(45)">
                                    <path d="M 0 0 L 8 -1 L 10 0 L 8 1 Z" fill="#ff9800"/>
                                    <path d="M 2 -3 L 6 -1 L 6 1 L 2 3 Z" fill="#ff9800"/>
                                    <path d="M 8 -0.5 L 12 -0.5 L 12 0.5 L 8 0.5 Z" fill="#ffb74d"/>
                                </g>
                                
                                <!-- Estela del avión -->
                                <path d="M 75 35 Q 85 40 90 45" fill="none" stroke="#ff9800" stroke-width="1" opacity="0.5" stroke-dasharray="2,2"/>
                            </svg>
                        </div>
                        <h1><a href="index.html">Air ipet 57</a></h1>
                    </div>
                </div>
                
                <div class="header__center">
                    <nav class="main-nav">
                        <a href="index.html" class="nav-link">Alojamientos</a>
                        <a href="paquetes.html" class="nav-link">Paquetes</a>
                        <a href="contacto.html" class="nav-link">Contacto</a>
                        <a href="experiencias.html" class="nav-link">Experiencias</a>
                        <a href="vuelos.html" class="nav-link active">Vuelos</a>
                    </nav>
                </div>
                
                <div class="header__right">
                    <div class="user-menu">
                        <button class="user-btn" id="userMenuBtn">
                            <i class="fas fa-user-circle"></i>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <a href="perfil.html" class="dropdown-item">
                                <i class="fas fa-user"></i>
                                Mi Perfil
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="inicio-sesion.html" class="dropdown-item">
                                <i class="fas fa-sign-out-alt"></i>
                                Cerrar Sesión
                            </a>
                        </div>
                    </div>
                    
                    <div class="cart-menu">
                        <button class="cart-btn" id="cartBtn">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count" id="cartCount">0</span>
                        </button>
                        <div class="cart-dropdown" id="cartDropdown">
                            <div class="cart-dropdown-header">
                                <h4>Carrito de Vuelos</h4>
                            </div>
                            <div class="cart-dropdown-content" id="cartDropdownContent">
                                <div class="empty-cart">
                                    <i class="fas fa-shopping-cart"></i>
                                    <p>Tu carrito está vacío</p>
                                    <a href="vuelos.html" class="btn btn--primary btn--small">Explorar Vuelos</a>
                                </div>
                            </div>
                            <div class="cart-dropdown-footer">
                                <a href="carrito.html" class="btn btn--primary btn--full">Ver Carrito Completo</a>
                            </div>
                        </div>
                    </div>
                    
                    <a href="inicio-sesion.html" class="btn btn--primary">Iniciar sesión</a>
                    <a href="registrarse.html" class="btn btn--secondary">Registrarse</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero__background">
            <img src="https://images.unsplash.com/photo-1436491865332-7a61a109cc05?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80" alt="Vuelos" class="hero__image">
        </div>
        <div class="hero__content">
            <div class="container">
                <h2 class="hero__title">
                    Encuentra el <span class="highlight">vuelo perfecto</span><br>
                    para tu próxima aventura
                </h2>
                
                <!-- Flight Search Form -->
                <div class="flight-search-container">
                    <div class="flight-type-selector">
                        <label class="flight-type-option">
                            <input type="radio" name="flightType" value="roundtrip" checked>
                            <span>Ida y vuelta</span>
                        </label>
                        <label class="flight-type-option">
                            <input type="radio" name="flightType" value="oneway">
                            <span>Solo ida</span>
                        </label>
                       
                    </div>
                    
                    <form class="flight-search-form" id="flightSearchForm">
                        <div class="search-row">
                            <div class="search-field">
                                <label>Origen</label>
                                <input type="text" id="origin" placeholder="¿Desde dónde viajas?" value="Madrid (MAD)">
                                <i class="fas fa-plane-departure"></i>
                            </div>
                            
                            <button type="button" class="swap-btn" onclick="swapCities()">
                                <i class="fas fa-exchange-alt"></i>
                            </button>
                            
                            <div class="search-field">
                                <label>Destino</label>
                                <input type="text" id="destination" placeholder="¿A dónde quieres ir?" value="Barcelona (BCN)">
                                <i class="fas fa-plane-arrival"></i>
                            </div>
                        </div>
                        
                        <div class="search-row">
                            <div class="search-field">
                                <label>Fecha de ida</label>
                                <input type="date" id="departureDate">
                                <i class="fas fa-calendar"></i>
                            </div>
                            
                            <div class="search-field" id="returnDateField">
                                <label>Fecha de vuelta</label>
                                <input type="date" id="returnDate">
                                <i class="fas fa-calendar"></i>
                            </div>
                            
                            <div class="search-field">
                                <label>Pasajeros</label>
                                <div class="passengers-selector" id="passengersSelector">
                                    <span id="passengersText">1 adulto</span>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="passengers-dropdown" id="passengersDropdown">
                                    <div class="passenger-type">
                                        <div class="passenger-type-info">
                                            <span class="label">Adultos</span>
                                            <span class="description">12+ años</span>
                                        </div>
                                        <div class="counter">
                                            <button type="button" id="adultsMinusBtn">-</button>
                                            <span id="adultsCount">1</span>
                                            <button type="button" id="adultsPlusBtn">+</button>
                                        </div>
                                    </div>
                                    <div class="passenger-type">
                                        <div class="passenger-type-info">
                                            <span class="label">Niños</span>
                                            <span class="description">2-11 años</span>
                                        </div>
                                        <div class="counter">
                                            <button type="button" id="childrenMinusBtn">-</button>
                                            <span id="childrenCount">0</span>
                                            <button type="button" id="childrenPlusBtn">+</button>
                                        </div>
                                    </div>
                                    <div class="passenger-type">
                                        <div class="passenger-type-info">
                                            <span class="label">Bebés</span>
                                            <span class="description">0-2 años</span>
                                        </div>
                                        <div class="counter">
                                            <button type="button" id="infantsMinusBtn">-</button>
                                            <span id="infantsCount">0</span>
                                            <button type="button" id="infantsPlusBtn">+</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="search-field">
                                <label>Clase</label>
                                <select id="flightClass">
                                    <option value="economy">Económica</option>
                                    <option value="premium">Premium</option>
                                    <option value="business">Business</option>
                                    <option value="first">Primera</option>
                                </select>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                        </div>
                        
                        <button type="submit" class="search-btn">
                            <i class="fas fa-search"></i>
                            Buscar vuelos
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Flight Filters Section -->
    <!-- Flights Results Section -->
    <main class="main">
        <div class="container">
            <section class="flights-section">
                <div class="results-header">
                    <h3 class="section-title">
                        Vuelos disponibles Madrid → Barcelona
                        <span class="results-count" id="resultsCount">(12 vuelos encontrados)</span>
                    </h3>
                </div>
                
                <div class="flights-grid" id="flightsGrid">
                    <!-- Flight Card 1 -->
                    <div class="flight-card" data-airline="iberia" data-price="89" data-stops="0" data-departure="08:30" data-id="flight1">
                        <div class="flight-card__header">
                            <div class="airline-info">
                                <img src="https://logos-world.net/wp-content/uploads/2023/01/Iberia-Logo.png" alt="Iberia" class="airline-logo">
                                <span class="airline-name">Iberia</span>
                            </div>
                            <button class="favorite-btn" onclick="toggleFavorite(this, 'flight1')">
                                <i class="far fa-heart"></i>
                            </button>
                        </div>
                        
                        <div class="flight-card__content">
                            <div class="flight-route">
                                <div class="departure">
                                    <div class="time">08:30</div>
                                    <div class="airport">MAD</div>
                                    <div class="city">Madrid</div>
                                </div>
                                
                                <div class="flight-info">
                                    <div class="duration">1h 25m</div>
                                    <div class="flight-line">
                                        <div class="line"></div>
                                        <i class="fas fa-plane"></i>
                                    </div>
                                    <div class="stops">Directo</div>
                                </div>
                                
                                <div class="arrival">
                                    <div class="time">09:55</div>
                                    <div class="airport">BCN</div>
                                    <div class="city">Barcelona</div>
                                </div>
                            </div>
                            
                            <div class="flight-card__footer">
                                <div class="price-info">
                                    <div class="price">€89</div>
                                    <div class="price-note">por persona</div>
                                </div>
                                <button class="btn btn--primary add-to-cart" onclick="addFlightToCart('flight1', 'Madrid → Barcelona (Iberia)', 89, 'https://logos-world.net/wp-content/uploads/2023/01/Iberia-Logo.png')">
                                    <i class="fas fa-cart-plus"></i>
                                    Agregar
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Flight Card 2 -->
                    <div class="flight-card" data-airline="vueling" data-price="65" data-stops="0" data-departure="14:15" data-id="flight2">
                        <div class="flight-card__header">
                            <div class="airline-info">
                                <img src="https://1000logos.net/wp-content/uploads/2020/04/Vueling-Logo.png" alt="Vueling" class="airline-logo">
                                <span class="airline-name">Vueling</span>
                            </div>
                            <button class="favorite-btn" onclick="toggleFavorite(this, 'flight2')">
                                <i class="far fa-heart"></i>
                            </button>
                        </div>
                        
                        <div class="flight-card__content">
                            <div class="flight-route">
                                <div class="departure">
                                    <div class="time">14:15</div>
                                    <div class="airport">MAD</div>
                                    <div class="city">Madrid</div>
                                </div>
                                
                                <div class="flight-info">
                                    <div class="duration">1h 30m</div>
                                    <div class="flight-line">
                                        <div class="line"></div>
                                        <i class="fas fa-plane"></i>
                                    </div>
                                    <div class="stops">Directo</div>
                                </div>
                                
                                <div class="arrival">
                                    <div class="time">15:45</div>
                                    <div class="airport">BCN</div>
                                    <div class="city">Barcelona</div>
                                </div>
                            </div>
                            
                            <div class="flight-card__footer">
                                <div class="price-info">
                                    <div class="price">€65</div>
                                    <div class="price-note">por persona</div>
                                </div>
                                <button class="btn btn--primary add-to-cart" onclick="addFlightToCart('flight2', 'Madrid → Barcelona (Vueling)', 65, 'https://1000logos.net/wp-content/uploads/2020/04/Vueling-Logo.png')">
                                    <i class="fas fa-cart-plus"></i>
                                    Agregar
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Flight Card 3 -->
                    <div class="flight-card" data-airline="ryanair" data-price="45" data-stops="0" data-departure="19:20" data-id="flight3">
                        <div class="flight-card__header">
                            <div class="airline-info">
                                <img src="https://logos-world.net/wp-content/uploads/2020/03/Ryanair-Logo.png" alt="Ryanair" class="airline-logo">
                                <span class="airline-name">Ryanair</span>
                            </div>
                            <button class="favorite-btn" onclick="toggleFavorite(this, 'flight3')">
                                <i class="far fa-heart"></i>
                            </button>
                        </div>
                        
                        <div class="flight-card__content">
                            <div class="flight-route">
                                <div class="departure">
                                    <div class="time">19:20</div>
                                    <div class="airport">MAD</div>
                                    <div class="city">Madrid</div>
                                </div>
                                
                                <div class="flight-info">
                                    <div class="duration">1h 35m</div>
                                    <div class="flight-line">
                                        <div class="line"></div>
                                        <i class="fas fa-plane"></i>
                                    </div>
                                    <div class="stops">Directo</div>
                                </div>
                                
                                <div class="arrival">
                                    <div class="time">20:55</div>
                                    <div class="airport">BCN</div>
                                    <div class="city">Barcelona</div>
                                </div>
                            </div>
                            
                            <div class="flight-card__footer">
                                <div class="price-info">
                                    <div class="price">€45</div>
                                    <div class="price-note">por persona</div>
                                </div>
                                <button class="btn btn--primary add-to-cart" onclick="addFlightToCart('flight3', 'Madrid → Barcelona (Ryanair)', 45, 'https://logos-world.net/wp-content/uploads/2020/03/Ryanair-Logo.png')">
                                    <i class="fas fa-cart-plus"></i>
                                    Agregar
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Flight Card 4 - Con escala -->
                    <div class="flight-card" data-airline="lufthansa" data-price="125" data-stops="1" data-departure="11:45" data-id="flight4">
                        <div class="flight-card__header">
                            <div class="airline-info">
                                <img src="https://logos-world.net/wp-content/uploads/2020/03/Lufthansa-Logo.png" alt="Lufthansa" class="airline-logo">
                                <span class="airline-name">Lufthansa</span>
                            </div>
                            <button class="favorite-btn" onclick="toggleFavorite(this, 'flight4')">
                                <i class="far fa-heart"></i>
                            </button>
                        </div>
                        
                        <div class="flight-card__content">
                            <div class="flight-route">
                                <div class="departure">
                                    <div class="time">11:45</div>
                                    <div class="airport">MAD</div>
                                    <div class="city">Madrid</div>
                                </div>
                                
                                <div class="flight-info">
                                    <div class="duration">3h 20m</div>
                                    <div class="flight-line">
                                        <div class="line"></div>
                                        <i class="fas fa-plane"></i>
                                        <div class="stop-indicator"></div>
                                    </div>
                                    <div class="stops">1 escala en FRA</div>
                                </div>
                                
                                <div class="arrival">
                                    <div class="time">15:05</div>
                                    <div class="airport">BCN</div>
                                    <div class="city">Barcelona</div>
                                </div>
                            </div>
                            
                            <div class="flight-card__footer">
                                <div class="price-info">
                                    <div class="price">€125</div>
                                    <div class="price-note">por persona</div>
                                </div>
                                <button class="btn btn--primary add-to-cart" onclick="addFlightToCart('flight4', 'Madrid → Barcelona (Lufthansa)', 125, 'https://logos-world.net/wp-content/uploads/2020/03/Lufthansa-Logo.png')">
                                    <i class="fas fa-cart-plus"></i>
                                    Agregar
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Flight Card 5 -->
                    <div class="flight-card" data-airline="airfrance" data-price="98" data-stops="0" data-departure="16:30" data-id="flight5">
                        <div class="flight-card__header">
                            <div class="airline-info">
                                <img src="https://logos-world.net/wp-content/uploads/2020/03/Air-France-Logo.png" alt="Air France" class="airline-logo">
                                <span class="airline-name">Air France</span>
                            </div>
                            <button class="favorite-btn" onclick="toggleFavorite(this, 'flight5')">
                                <i class="far fa-heart"></i>
                            </button>
                        </div>
                        
                        <div class="flight-card__content">
                            <div class="flight-route">
                                <div class="departure">
                                    <div class="time">16:30</div>
                                    <div class="airport">MAD</div>
                                    <div class="city">Madrid</div>
                                </div>
                                
                                <div class="flight-info">
                                    <div class="duration">1h 25m</div>
                                    <div class="flight-line">
                                        <div class="line"></div>
                                        <i class="fas fa-plane"></i>
                                    </div>
                                    <div class="stops">Directo</div>
                                </div>
                                
                                <div class="arrival">
                                    <div class="time">17:55</div>
                                    <div class="airport">BCN</div>
                                    <div class="city">Barcelona</div>
                                </div>
                            </div>
                            
                            <div class="flight-card__footer">
                                <div class="price-info">
                                    <div class="price">€98</div>
                                    <div class="price-note">por persona</div>
                                </div>
                                <button class="btn btn--primary add-to-cart" onclick="addFlightToCart('flight5', 'Madrid → Barcelona (Air France)', 98, 'https://logos-world.net/wp-content/uploads/2020/03/Air-France-Logo.png')">
                                    <i class="fas fa-cart-plus"></i>
                                    Agregar
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Flight Card 6 -->
                    <div class="flight-card" data-airline="iberia" data-price="110" data-stops="0" data-departure="21:15" data-id="flight6">
                        <div class="flight-card__header">
                            <div class="airline-info">
                                <img src="https://logos-world.net/wp-content/uploads/2023/01/Iberia-Logo.png" alt="Iberia" class="airline-logo">
                                <span class="airline-name">Iberia</span>
                            </div>
                            <button class="favorite-btn" onclick="toggleFavorite(this, 'flight6')">
                                <i class="far fa-heart"></i>
                            </button>
                        </div>
                        
                        <div class="flight-card__content">
                            <div class="flight-route">
                                <div class="departure">
                                    <div class="time">21:15</div>
                                    <div class="airport">MAD</div>
                                    <div class="city">Madrid</div>
                                </div>
                                
                                <div class="flight-info">
                                    <div class="duration">1h 30m</div>
                                    <div class="flight-line">
                                        <div class="line"></div>
                                        <i class="fas fa-plane"></i>
                                    </div>
                                    <div class="stops">Directo</div>
                                </div>
                                
                                <div class="arrival">
                                    <div class="time">22:45</div>
                                    <div class="airport">BCN</div>
                                    <div class="city">Barcelona</div>
                                </div>
                            </div>
                            
                            <div class="flight-card__footer">
                                <div class="price-info">
                                    <div class="price">€110</div>
                                    <div class="price-note">por persona</div>
                                </div>
                                <button class="btn btn--primary add-to-cart" onclick="addFlightToCart('flight6', 'Madrid → Barcelona (Iberia)', 110, 'https://logos-world.net/wp-content/uploads/2023/01/Iberia-Logo.png')">
                                    <i class="fas fa-cart-plus"></i>
                                    Agregar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Popular Destinations Section -->
            <section class="destinations-section">
                <h3 class="section-title">Destinos populares desde Madrid</h3>
                <div class="destinations-grid">
                    <div class="destination-card" onclick="searchFlights('Madrid', 'Barcelona')">
                        <img src="https://images.unsplash.com/photo-1539037116277-4db20889f2d4?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" alt="Barcelona">
                        <div class="destination-info">
                            <h4>Barcelona</h4>
                            <p>Desde €45</p>
                        </div>
                    </div>
                    <div class="destination-card" onclick="searchFlights('Madrid', 'París')">
                        <img src="https://images.unsplash.com/photo-1502602898536-47ad22581b52?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" alt="París">
                        <div class="destination-info">
                            <h4>París</h4>
                            <p>Desde €89</p>
                        </div>
                    </div>
                    <div class="destination-card" onclick="searchFlights('Madrid', 'Londres')">
                        <img src="https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" alt="Londres">
                        <div class="destination-info">
                            <h4>Londres</h4>
                            <p>Desde €125</p>
                        </div>
                    </div>
                    <div class="destination-card" onclick="searchFlights('Madrid', 'Roma')">
                        <img src="https://images.unsplash.com/photo-1552832230-c0197dd311b5?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" alt="Roma">
                        <div class="destination-info">
                            <h4>Roma</h4>
                            <p>Desde €95</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <div class="logo-container">
                            <svg class="planet-logo" viewBox="0 0 100 100" width="60" height="60">
                                <!-- Planeta -->
                                <circle cx="50" cy="50" r="25" fill="#4285f4" stroke="#1976d2" stroke-width="2"/>
                                <circle cx="45" cy="45" r="3" fill="#81c784" opacity="0.8"/>
                                <circle cx="55" cy="40" r="2" fill="#81c784" opacity="0.8"/>
                                <circle cx="52" cy="55" r="2.5" fill="#81c784" opacity="0.8"/>
                                <circle cx="42" cy="58" r="1.5" fill="#81c784" opacity="0.8"/>
                                <path d="M 35 45 Q 50 35 65 45 Q 50 55 35 45" fill="none" stroke="#81c784" stroke-width="1.5" opacity="0.6"/>
                                
                                <!-- Avión -->
                                <g transform="translate(70,30) rotate(45)">
                                    <path d="M 0 0 L 8 -1 L 10 0 L 8 1 Z" fill="#ff9800"/>
                                    <path d="M 2 -3 L 6 -1 L 6 1 L 2 3 Z" fill="#ff9800"/>
                                    <path d="M 8 -0.5 L 12 -0.5 L 12 0.5 L 8 0.5 Z" fill="#ffb74d"/>
                                </g>
                                
                                <!-- Estela del avión -->
                                <path d="M 75 35 Q 85 40 90 45" fill="none" stroke="#ff9800" stroke-width="1" opacity="0.5" stroke-dasharray="2,2"/>
                            </svg>
                        </div>
                        <div>
                            <h3>Air ipet 57</h3>
                            <p>Tu vuelo perfecto te espera</p>
                        </div>
                    </div>
                    <p class="footer-description">
                        Encuentra los mejores vuelos al mejor precio. Comparamos cientos de aerolíneas para ofrecerte las mejores opciones de viaje.
                    </p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Vuelos Populares</h4>
                    <ul>
                        <li><a href="#" onclick="searchFlights('Madrid', 'Barcelona')">Madrid - Barcelona</a></li>
                        <li><a href="#" onclick="searchFlights('Madrid', 'París')">Madrid - París</a></li>
                        <li><a href="#" onclick="searchFlights('Madrid', 'Londres')">Madrid - Londres</a></li>
                        <li><a href="#" onclick="searchFlights('Madrid', 'Roma')">Madrid - Roma</a></li>
                        <li><a href="#" onclick="searchFlights('Barcelona', 'París')">Barcelona - París</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Aerolíneas</h4>
                    <ul>
                        <li><a href="#">Iberia</a></li>
                        <li><a href="#">Vueling</a></li>
                        <li><a href="#">Ryanair</a></li>
                        <li><a href="#">Lufthansa</a></li>
                        <li><a href="#">Air France</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Soporte</h4>
                    <ul>
                        <li><a href="contacto.html">Contacto</a></li>
                        <li><a href="#">Política de equipaje</a></li>
                        <li><a href="#">Cambios y cancelaciones</a></li>
                        <li><a href="#">Check-in online</a></li>
                        <li><a href="#">Estado del vuelo</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Newsletter</h4>
                    <p>Recibe las mejores ofertas de vuelos.</p>
                    <form class="newsletter-form" id="newsletterForm">
                        <input type="email" placeholder="Tu email" required>
                        <button type="submit">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </form>
                    <div class="contact-info">
                        <p><i class="fas fa-phone"></i> +34 900 123 456</p>
                        <p><i class="fas fa-envelope"></i> vuelos@airipet57.com</p>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <p>&copy; 2024 Air ipet 57. Todos los derechos reservados.</p>
                    <div class="payment-methods">
                        <i class="fab fa-cc-visa"></i>
                        <i class="fab fa-cc-mastercard"></i>
                        <i class="fab fa-cc-paypal"></i>
                        <i class="fab fa-cc-apple-pay"></i>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Variables globales
let cart = JSON.parse(localStorage.getItem('cart')) || [];
let passengers = { adults: 1, children: 0, infants: 0 };
let currentFilters = {
    airline: '',
    maxPrice: '',
    stops: '',
    timeRange: '',
    sort: 'price'
};

// Datos de ejemplo de vuelos (simulando API)
const flightsData = [
    {
        id: 'flight1',
        airline: 'iberia',
        airlineName: 'Iberia',
        logo: 'https://logos-world.net/wp-content/uploads/2023/01/Iberia-Logo.png',
        price: 89,
        departure: { time: '08:30', airport: 'MAD', city: 'Madrid' },
        arrival: { time: '09:55', airport: 'BCN', city: 'Barcelona' },
        duration: '1h 25m',
        stops: 0,
        aircraft: 'Airbus A320'
    },
    {
        id: 'flight2',
        airline: 'vueling',
        airlineName: 'Vueling',
        logo: 'https://1000logos.net/wp-content/uploads/2020/04/Vueling-Logo.png',
        price: 65,
        departure: { time: '14:15', airport: 'MAD', city: 'Madrid' },
        arrival: { time: '15:45', airport: 'BCN', city: 'Barcelona' },
        duration: '1h 30m',
        stops: 0,
        aircraft: 'Airbus A320'
    },
    {
        id: 'flight3',
        airline: 'ryanair',
        airlineName: 'Ryanair',
        logo: 'https://logos-world.net/wp-content/uploads/2020/03/Ryanair-Logo.png',
        price: 45,
        departure: { time: '19:20', airport: 'MAD', city: 'Madrid' },
        arrival: { time: '20:55', airport: 'BCN', city: 'Barcelona' },
        duration: '1h 35m',
        stops: 0,
        aircraft: 'Boeing 737'
    },
    {
        id: 'flight4',
        airline: 'lufthansa',
        airlineName: 'Lufthansa',
        logo: 'https://logos-world.net/wp-content/uploads/2020/03/Lufthansa-Logo.png',
        price: 125,
        departure: { time: '11:45', airport: 'MAD', city: 'Madrid' },
        arrival: { time: '15:05', airport: 'BCN', city: 'Barcelona' },
        duration: '3h 20m',
        stops: 1,
        stopInfo: '1 escala en FRA',
        aircraft: 'Airbus A330'
    },
    {
        id: 'flight5',
        airline: 'airfrance',
        airlineName: 'Air France',
        logo: 'https://logos-world.net/wp-content/uploads/2020/03/Air-France-Logo.png',
        price: 98,
        departure: { time: '16:30', airport: 'MAD', city: 'Madrid' },
        arrival: { time: '17:55', airport: 'BCN', city: 'Barcelona' },
        duration: '1h 25m',
        stops: 0,
        aircraft: 'Airbus A319'
    },
    {
        id: 'flight6',
        airline: 'iberia',
        airlineName: 'Iberia',
        logo: 'https://logos-world.net/wp-content/uploads/2023/01/Iberia-Logo.png',
        price: 110,
        departure: { time: '21:15', airport: 'MAD', city: 'Madrid' },
        arrival: { time: '22:45', airport: 'BCN', city: 'Barcelona' },
        duration: '1h 30m',
        stops: 0,
        aircraft: 'Airbus A321'
    }
];

// Inicialización
document.addEventListener('DOMContentLoaded', function() {
    initializePage();
    setupEventListeners();
    renderFlights();
    updateCartCount();
    updateCartDropdown();
});

function initializePage() {
    // Configurar fechas mínimas
    const today = new Date().toISOString().split('T')[0];
    const departureInput = document.getElementById('departureDate');
    const returnInput = document.getElementById('returnDate');
    
    if (departureInput) departureInput.min = today;
    if (returnInput) returnInput.min = today;
    
    // Fechas por defecto
    const tomorrow = new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);
    if (departureInput) departureInput.value = tomorrow.toISOString().split('T')[0];
    
    const returnDate = new Date();
    returnDate.setDate(returnDate.getDate() + 8);
    if (returnInput) returnInput.value = returnDate.toISOString().split('T')[0];
    
    // Inicializar texto de pasajeros y botones
    updatePassengersText();
    updatePassengerButtons();
}

function setupEventListeners() {
    // Menús desplegables
    const userMenuBtn = document.getElementById('userMenuBtn');
    const cartBtn = document.getElementById('cartBtn');
    const passengersSelector = document.getElementById('passengersSelector');
    
    if (userMenuBtn) userMenuBtn.addEventListener('click', toggleUserMenu);
    if (cartBtn) cartBtn.addEventListener('click', toggleCartMenu);
    if (passengersSelector) passengersSelector.addEventListener('click', togglePassengersDropdown);
    
    // Event listeners para botones de pasajeros
    const adultsMinusBtn = document.getElementById('adultsMinusBtn');
    const adultsPlusBtn = document.getElementById('adultsPlusBtn');
    const childrenMinusBtn = document.getElementById('childrenMinusBtn');
    const childrenPlusBtn = document.getElementById('childrenPlusBtn');
    const infantsMinusBtn = document.getElementById('infantsMinusBtn');
    const infantsPlusBtn = document.getElementById('infantsPlusBtn');
    
    if (adultsMinusBtn) adultsMinusBtn.addEventListener('click', (e) => { e.stopPropagation(); changePassengers('adults', -1); });
    if (adultsPlusBtn) adultsPlusBtn.addEventListener('click', (e) => { e.stopPropagation(); changePassengers('adults', 1); });
    if (childrenMinusBtn) childrenMinusBtn.addEventListener('click', (e) => { e.stopPropagation(); changePassengers('children', -1); });
    if (childrenPlusBtn) childrenPlusBtn.addEventListener('click', (e) => { e.stopPropagation(); changePassengers('children', 1); });
    if (infantsMinusBtn) infantsMinusBtn.addEventListener('click', (e) => { e.stopPropagation(); changePassengers('infants', -1); });
    if (infantsPlusBtn) infantsPlusBtn.addEventListener('click', (e) => { e.stopPropagation(); changePassengers('infants', 1); });
    
    // Cerrar dropdowns al hacer clic fuera
    document.addEventListener('click', closeDropdowns);
    
    // Formulario de búsqueda
    const flightForm = document.getElementById('flightSearchForm');
    if (flightForm) flightForm.addEventListener('submit', handleFlightSearch);
    
    // Tipo de vuelo
    document.querySelectorAll('input[name="flightType"]').forEach(radio => {
        radio.addEventListener('change', handleFlightTypeChange);
    });
    
    // Newsletter
    const newsletterForm = document.getElementById('newsletterForm');
    if (newsletterForm) newsletterForm.addEventListener('submit', handleNewsletterSubmit);
    
    // Botones de intercambio de ciudades
    const swapBtn = document.querySelector('.swap-btn');
    if (swapBtn) swapBtn.addEventListener('click', swapCities);
    
    // Prevenir que el dropdown de pasajeros se cierre al hacer clic dentro
    const passengersDropdown = document.getElementById('passengersDropdown');
    if (passengersDropdown) {
        passengersDropdown.addEventListener('click', function(e) {
            e.stopPropagation();
        });
    }
}

// Funciones del carrito
function updateCartCount() {
    const cartCount = document.getElementById('cartCount');
    if (!cartCount) return;
    
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    cartCount.textContent = totalItems;
    cartCount.style.display = totalItems > 0 ? 'flex' : 'none';
}

function addFlightToCart(flightId) {
    const flight = flightsData.find(f => f.id === flightId);
    if (!flight) return;
    
    const existingItem = cart.find(item => item.id === flightId);
    
    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({
            id: flightId,
            name: `${flight.departure.city} → ${flight.arrival.city} (${flight.airlineName})`,
            price: flight.price,
            image: flight.logo,
            quantity: 1,
            type: 'flight',
            details: {
                departure: flight.departure,
                arrival: flight.arrival,
                duration: flight.duration
            }
        });
    }
    
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCount();
    updateCartDropdown();
    showNotification(`Vuelo agregado al carrito`, 'success');
}

function updateCartDropdown() {
    const cartDropdownContent = document.getElementById('cartDropdownContent');
    if (!cartDropdownContent) return;
    
    if (cart.length === 0) {
        cartDropdownContent.innerHTML = `
        <div class="empty-cart">
            <i class="fas fa-shopping-cart"></i>
            <p>Tu carrito está vacío</p>
            <a href="vuelos.html" class="btn btn--primary btn--small">Explorar Vuelos</a>
        </div>
    `;
    } else {
        const cartItems = cart.slice(0, 3).map(item => `
        <div class="cart-dropdown-item">
            <img src="${item.image}" alt="${item.name}">
            <div class="cart-item-info">
                <h5>${item.name}</h5>
                <p>€${item.price} x ${item.quantity}</p>
                ${item.details ? `<small>${item.details.departure.time} - ${item.details.arrival.time}</small>` : ''}
            </div>
            <button onclick="removeFromCart('${item.id}')" class="remove-item-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
    `).join('');
    
        const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    
        cartDropdownContent.innerHTML = `
        ${cartItems}
        ${cart.length > 3 ? `<p class="more-items">Y ${cart.length - 3} vuelos más...</p>` : ''}
        <div class="cart-dropdown-total">
            <strong>Total: €${total.toLocaleString()}</strong>
        </div>
    `;
    }
}

function removeFromCart(id) {
    cart = cart.filter(item => item.id !== id);
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCount();
    updateCartDropdown();
    showNotification('Vuelo eliminado del carrito', 'info');
}

// Funciones de menús
function toggleUserMenu(e) {
    e.stopPropagation();
    const dropdown = document.getElementById('userDropdown');
    const cartDropdown = document.getElementById('cartDropdown');
    const passengersDropdown = document.getElementById('passengersDropdown');
    
    if (dropdown) dropdown.classList.toggle('show');
    if (cartDropdown) cartDropdown.classList.remove('show');
    if (passengersDropdown) passengersDropdown.classList.remove('show');
    removeBackdrop();
}

function toggleCartMenu(e) {
    e.stopPropagation();
    const dropdown = document.getElementById('cartDropdown');
    const userDropdown = document.getElementById('userDropdown');
    const passengersDropdown = document.getElementById('passengersDropdown');
    
    if (dropdown) dropdown.classList.toggle('show');
    if (userDropdown) userDropdown.classList.remove('show');
    if (passengersDropdown) passengersDropdown.classList.remove('show');
    removeBackdrop();
}

function togglePassengersDropdown(e) {
    e.stopPropagation();
    const dropdown = document.getElementById('passengersDropdown');
    const selector = document.getElementById('passengersSelector');
    const userDropdown = document.getElementById('userDropdown');
    const cartDropdown = document.getElementById('cartDropdown');
    
    if (!dropdown || !selector) return;
    
    const isShowing = dropdown.classList.contains('show');
    
    // Cerrar otros dropdowns
    if (userDropdown) userDropdown.classList.remove('show');
    if (cartDropdown) cartDropdown.classList.remove('show');
    
    if (isShowing) {
        dropdown.classList.remove('show');
        selector.classList.remove('active');
        removeBackdrop();
    } else {
        // Verificar si estamos en móvil o si hay espacio suficiente
        const isMobile = window.innerWidth <= 768;
        
        if (isMobile) {
            createBackdrop();
        } else {
            // Verificar espacio disponible
            const rect = selector.getBoundingClientRect();
            const viewportHeight = window.innerHeight;
            const spaceBelow = viewportHeight - rect.bottom;
            const dropdownHeight = 300;
            
            if (spaceBelow < dropdownHeight) {
                // No hay espacio suficiente, abrir hacia arriba
                dropdown.style.top = 'auto';
                dropdown.style.bottom = 'calc(100% + 4px)';
            } else {
                // Hay espacio, abrir hacia abajo (posición normal)
                dropdown.style.top = 'calc(100% + 4px)';
                dropdown.style.bottom = 'auto';
            }
        }
        
        dropdown.classList.add('show');
        selector.classList.add('active');
    }
}

function createBackdrop() {
    let backdrop = document.querySelector('.passengers-dropdown-backdrop');
    if (!backdrop) {
        backdrop = document.createElement('div');
        backdrop.className = 'passengers-dropdown-backdrop';
        backdrop.addEventListener('click', function() {
            const dropdown = document.getElementById('passengersDropdown');
            const selector = document.getElementById('passengersSelector');
            if (dropdown) dropdown.classList.remove('show');
            if (selector) selector.classList.remove('active');
            removeBackdrop();
        });
        document.body.appendChild(backdrop);
    }
    backdrop.classList.add('show');
}

function removeBackdrop() {
    const backdrop = document.querySelector('.passengers-dropdown-backdrop');
    if (backdrop) {
        backdrop.classList.remove('show');
        setTimeout(() => {
            if (backdrop.parentNode) {
                backdrop.parentNode.removeChild(backdrop);
            }
        }, 300);
    }
}

function closeDropdowns(e) {
    // No cerrar si se hace clic dentro de un dropdown
    if (e.target.closest('.user-dropdown') || 
        e.target.closest('.cart-dropdown') || 
        e.target.closest('.passengers-dropdown') ||
        e.target.closest('.passengers-selector')) {
        return;
    }
    
    const userDropdown = document.getElementById('userDropdown');
    const cartDropdown = document.getElementById('cartDropdown');
    const passengersDropdown = document.getElementById('passengersDropdown');
    const passengersSelector = document.getElementById('passengersSelector');
    
    if (userDropdown) userDropdown.classList.remove('show');
    if (cartDropdown) cartDropdown.classList.remove('show');
    if (passengersDropdown) passengersDropdown.classList.remove('show');
    if (passengersSelector) passengersSelector.classList.remove('active');
    removeBackdrop();
}

// Funciones de búsqueda de vuelos
function swapCities(e) {
    e.preventDefault();
    const origin = document.getElementById('origin');
    const destination = document.getElementById('destination');
    
    if (origin && destination) {
        const temp = origin.value;
        origin.value = destination.value;
        destination.value = temp;
        showNotification('Ciudades intercambiadas', 'info');
    }
}

function changePassengers(type, change) {
    const currentCount = passengers[type];
    const newCount = Math.max(0, currentCount + change);
    
    // Validaciones
    if (type === 'adults' && newCount < 1) {
        showNotification('Debe haber al menos 1 adulto', 'error');
        return;
    }
    if (type === 'infants' && newCount > passengers.adults) {
        showNotification('El número de bebés no puede superar el de adultos', 'error');
        return;
    }
    
    passengers[type] = newCount;
    const countElement = document.getElementById(type + 'Count');
    if (countElement) countElement.textContent = newCount;
    
    // Actualizar estado de botones y texto
    updatePassengerButtons();
    updatePassengersText();
}

function updatePassengerButtons() {
    // Botón de adultos (mínimo 1)
    const adultsMinusBtn = document.getElementById('adultsMinusBtn');
    if (adultsMinusBtn) {
        adultsMinusBtn.disabled = passengers.adults <= 1;
    }
    
    // Botón de bebés (máximo igual a adultos)
    const infantsPlusBtn = document.getElementById('infantsPlusBtn');
    if (infantsPlusBtn) {
        infantsPlusBtn.disabled = passengers.infants >= passengers.adults;
    }
    
    // Botón de niños minus
    const childrenMinusBtn = document.getElementById('childrenMinusBtn');
    if (childrenMinusBtn) {
        childrenMinusBtn.disabled = passengers.children <= 0;
    }
    
    // Botón de bebés minus
    const infantsMinusBtn = document.getElementById('infantsMinusBtn');
    if (infantsMinusBtn) {
        infantsMinusBtn.disabled = passengers.infants <= 0;
    }
}

function updatePassengersText() {
    const passengersText = document.getElementById('passengersText');
    if (!passengersText) return;
    
    let text = '';
    
    if (passengers.adults > 0) {
        text += `${passengers.adults} adulto${passengers.adults > 1 ? 's' : ''}`;
    }
    if (passengers.children > 0) {
        text += `${text ? ', ' : ''}${passengers.children} niño${passengers.children > 1 ? 's' : ''}`;
    }
    if (passengers.infants > 0) {
        text += `${text ? ', ' : ''}${passengers.infants} bebé${passengers.infants > 1 ? 's' : ''}`;
    }
    
    passengersText.textContent = text;
}

function handleFlightTypeChange() {
    const returnDateField = document.getElementById('returnDateField');
    const selectedType = document.querySelector('input[name="flightType"]:checked');
    
    if (returnDateField && selectedType) {
        if (selectedType.value === 'oneway') {
            returnDateField.style.display = 'none';
        } else {
            returnDateField.style.display = 'block';
        }
    }
}

function handleFlightSearch(e) {
    e.preventDefault();
    
    const origin = document.getElementById('origin');
    const destination = document.getElementById('destination');
    const departureDate = document.getElementById('departureDate');
    const flightType = document.querySelector('input[name="flightType"]:checked');
    
    if (!origin || !destination || !departureDate) {
        showNotification('Por favor completa todos los campos obligatorios', 'error');
        return;
    }
    
    if (!origin.value || !destination.value || !departureDate.value) {
        showNotification('Por favor completa todos los campos obligatorios', 'error');
        return;
    }
    
    showNotification('Buscando vuelos...', 'info');
    
    // Simular búsqueda
    setTimeout(() => {
        showNotification('¡Vuelos encontrados! Mostrando resultados.', 'success');
        renderFlights();
        
        // Scroll a resultados
        const flightsSection = document.querySelector('.flights-section');
        if (flightsSection) {
            flightsSection.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    }, 1500);
}

// Renderizado de vuelos
function renderFlights() {
    const flightsGrid = document.getElementById('flightsGrid');
    if (!flightsGrid) return;
    
    const filteredFlights = getFilteredFlights();
    
    flightsGrid.innerHTML = filteredFlights.map(flight => createFlightCard(flight)).join('');
    updateResultsCount(filteredFlights.length);
    
    // Agregar filtros dinámicos
    addFiltersToResults();
}

function createFlightCard(flight) {
    const stopIndicator = flight.stops > 0 ? '<div class="stop-indicator"></div>' : '';
    const stopText = flight.stops === 0 ? 'Directo' : flight.stopInfo || `${flight.stops} escala${flight.stops > 1 ? 's' : ''}`;
    
    return `
    <div class="flight-card" data-airline="${flight.airline}" data-price="${flight.price}" data-stops="${flight.stops}" data-departure="${flight.departure.time}" data-id="${flight.id}">
        <div class="flight-card__header">
            <div class="airline-info">
                <img src="${flight.logo}" alt="${flight.airlineName}" class="airline-logo">
                <div>
                    <span class="airline-name">${flight.airlineName}</span>
                    <div class="aircraft-info">${flight.aircraft}</div>
                </div>
            </div>
            <button class="favorite-btn" onclick="toggleFavorite(this, '${flight.id}')">
                <i class="far fa-heart"></i>
            </button>
        </div>
        
        <div class="flight-card__content">
            <div class="flight-route">
                <div class="departure">
                    <div class="time">${flight.departure.time}</div>
                    <div class="airport">${flight.departure.airport}</div>
                    <div class="city">${flight.departure.city}</div>
                </div>
                
                <div class="flight-info">
                    <div class="duration">${flight.duration}</div>
                    <div class="flight-line">
                        <div class="line"></div>
                        <i class="fas fa-plane"></i>
                        ${stopIndicator}
                    </div>
                    <div class="stops">${stopText}</div>
                </div>
                
                <div class="arrival">
                    <div class="time">${flight.arrival.time}</div>
                    <div class="airport">${flight.arrival.airport}</div>
                    <div class="city">${flight.arrival.city}</div>
                </div>
            </div>
            
            <div class="flight-card__footer">
                <div class="price-info">
                    <div class="price">€${flight.price}</div>
                    <div class="price-note">por persona</div>
                </div>
                <button class="btn btn--primary add-to-cart" onclick="addFlightToCart('${flight.id}')">
                    <i class="fas fa-cart-plus"></i>
                    Seleccionar
                </button>
            </div>
        </div>
    </div>
`;
}

function addFiltersToResults() {
    const resultsHeader = document.querySelector('.results-header');
    
    // Verificar si ya existen los filtros
    if (document.querySelector('.results-filters') || !resultsHeader) return;
    
    const filtersHTML = `
    <div class="results-filters">
        <div class="filter-row">
            <select id="sortFilter" onchange="applySorting()">
                <option value="price">Precio más bajo</option>
                <option value="duration">Duración más corta</option>
                <option value="departure">Hora de salida</option>
                <option value="arrival">Hora de llegada</option>
            </select>
            
            <select id="airlineFilter" onchange="applyFilters()">
                <option value="">Todas las aerolíneas</option>
                <option value="iberia">Iberia</option>
                <option value="vueling">Vueling</option>
                <option value="ryanair">Ryanair</option>
                <option value="lufthansa">Lufthansa</option>
                <option value="airfrance">Air France</option>
            </select>
            
            <select id="stopsFilter" onchange="applyFilters()">
                <option value="">Cualquier escala</option>
                <option value="0">Vuelo directo</option>
                <option value="1">1 escala</option>
                <option value="2">2+ escalas</option>
            </select>
            
            <select id="timeFilter" onchange="applyFilters()">
                <option value="">Cualquier hora</option>
                <option value="morning">Mañana (06:00-12:00)</option>
                <option value="afternoon">Tarde (12:00-18:00)</option>
                <option value="evening">Noche (18:00-24:00)</option>
                <option value="night">Madrugada (00:00-06:00)</option>
            </select>
            
            <button class="clear-filters-btn" onclick="clearAllFilters()">
                <i class="fas fa-times"></i>
                Limpiar
            </button>
        </div>
    </div>
`;
    
    resultsHeader.insertAdjacentHTML('afterend', filtersHTML);
}

// Funciones de filtrado
function getFilteredFlights() {
    let filtered = [...flightsData];
    
    // Filtro por aerolínea
    if (currentFilters.airline) {
        filtered = filtered.filter(flight => flight.airline === currentFilters.airline);
    }
    
    // Filtro por escalas
    if (currentFilters.stops !== '') {
        filtered = filtered.filter(flight => flight.stops === parseInt(currentFilters.stops));
    }
    
    // Filtro por horario
    if (currentFilters.timeRange) {
        filtered = filtered.filter(flight => {
            const hour = parseInt(flight.departure.time.split(':')[0]);
            switch(currentFilters.timeRange) {
                case 'morning': return hour >= 6 && hour < 12;
                case 'afternoon': return hour >= 12 && hour < 18;
                case 'evening': return hour >= 18 && hour < 24;
                case 'night': return hour >= 0 && hour < 6;
                default: return true;
            }
        });
    }
    
    // Ordenamiento
    filtered.sort((a, b) => {
        switch(currentFilters.sort) {
            case 'price': return a.price - b.price;
            case 'duration': return a.stops - b.stops; // Aproximación por escalas
            case 'departure': return a.departure.time.localeCompare(b.departure.time);
            case 'arrival': return a.arrival.time.localeCompare(b.arrival.time);
            default: return a.price - b.price;
        }
    });
    
    return filtered;
}

function applyFilters() {
    const airlineFilter = document.getElementById('airlineFilter');
    const stopsFilter = document.getElementById('stopsFilter');
    const timeFilter = document.getElementById('timeFilter');
    
    currentFilters.airline = airlineFilter ? airlineFilter.value : '';
    currentFilters.stops = stopsFilter ? stopsFilter.value : '';
    currentFilters.timeRange = timeFilter ? timeFilter.value : '';
    
    renderFlights();
}

function applySorting() {
    const sortFilter = document.getElementById('sortFilter');
    currentFilters.sort = sortFilter ? sortFilter.value : 'price';
    renderFlights();
}

function clearAllFilters() {
    currentFilters = {
        airline: '',
        maxPrice: '',
        stops: '',
        timeRange: '',
        sort: 'price'
    };
    
    // Resetear selects
    const airlineFilter = document.getElementById('airlineFilter');
    const stopsFilter = document.getElementById('stopsFilter');
    const timeFilter = document.getElementById('timeFilter');
    const sortFilter = document.getElementById('sortFilter');
    
    if (airlineFilter) airlineFilter.value = '';
    if (stopsFilter) stopsFilter.value = '';
    if (timeFilter) timeFilter.value = '';
    if (sortFilter) sortFilter.value = 'price';
    
    renderFlights();
    showNotification('Filtros limpiados', 'info');
}

function updateResultsCount(count) {
    const resultsCount = document.getElementById('resultsCount');
    if (resultsCount) {
        resultsCount.textContent = `(${count} vuelos encontrados)`;
    }
}

// Funciones de favoritos
function toggleFavorite(button, id) {
    const icon = button.querySelector('i');
    const isFavorited = icon.classList.contains('fas');
    
    if (isFavorited) {
        icon.classList.remove('fas');
        icon.classList.add('far');
        button.classList.remove('active');
        showNotification('Eliminado de favoritos', 'info');
    } else {
        icon.classList.remove('far');
        icon.classList.add('fas');
        button.classList.add('active');
        showNotification('Agregado a favoritos', 'success');
    }
}

// Destinos populares
function searchFlights(origin, destination) {
    const originInput = document.getElementById('origin');
    const destinationInput = document.getElementById('destination');
    
    if (originInput) originInput.value = origin;
    if (destinationInput) destinationInput.value = destination;
    
    showNotification(`Buscando vuelos de ${origin} a ${destination}...`, 'info');
    
    setTimeout(() => {
        renderFlights();
        const flightsSection = document.querySelector('.flights-section');
        if (flightsSection) {
            flightsSection.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    }, 1000);
}

// Newsletter
function handleNewsletterSubmit(e) {
    e.preventDefault();
    const email = e.target.querySelector('input[type="email"]').value;
    showNotification('¡Gracias por suscribirte a nuestro newsletter!', 'success');
    e.target.reset();
}

// Sistema de notificaciones
function showNotification(message, type = 'info') {
    // Remover notificación existente
    const existingNotification = document.querySelector('.notification');
    if (existingNotification) {
        existingNotification.remove();
    }
    
    const notification = document.createElement('div');
    notification.className = `notification notification--${type}`;
    
    const iconMap = {
        success: 'check-circle',
        error: 'exclamation-circle',
        info: 'info-circle'
    };
    
    notification.innerHTML = `
    <i class="fas fa-${iconMap[type]}"></i>
    <span>${message}</span>
`;
    
    document.body.appendChild(notification);
    
    // Mostrar notificación
    setTimeout(() => {
        notification.classList.add('show');
    }, 100);
    
    // Ocultar notificación
    setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
        }, 300);
    }, 4000);
}

// Smooth scrolling para enlaces
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});
    </script>
</body>
</html>
